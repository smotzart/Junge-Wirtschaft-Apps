<GridLayout rows="auto, auto, *" xmlns:Card="nativescript-cardview" xmlns:lv="nativescript-telerik-ui/listview" tap="tap2">

  <GridLayout row="2" rows="180, auto" cssClass="empty-list" horizontalAlignment="center" visibility="{{ (event_actions.length == 0 && !isLoading) ? 'visible' : 'collapsed' }}">
    <StackLayout row="0" verticalAlignment="center" horizontalAlignment="center">
      <image src="~/images/empty-man.png" stretch="none" />
    </StackLayout>
    <Label row="1" text="Leider gibt es in dieser Kategorie keine Veranstaltungen" textWrap="true" />
  </GridLayout>

  <GridLayout row="0" rows="*" columns="*,*" cssClass="fake-tabs" visibility="{{ (!isLoading) ? 'visible' : 'collapsed' }}">
    <StackLayout col="0">
      <Button text="Alle" tap="{{ setActionsAllMode }}" cssClass="modeSelectedButtonStyle" />
      <GridLayout cssClass="{{ event_actions_mode === 'ALL' ? 'selectedBarItemBottomBorder' : 'barItemBottomBorder'}}" />
    </StackLayout>
    <StackLayout col="1">
      <Button text="Favorites" tap="{{ setActionsFavoritesMode }}" cssClass="modeSelectedButtonStyle" />
      <GridLayout cssClass="{{ event_actions_mode === 'FAVOURITES' ? 'selectedBarItemBottomBorder' : 'barItemBottomBorder'}}" />
    </StackLayout>
  </GridLayout>

  <StackLayout row="1" cssClass="search-wrap" visibility="{{ (!isLoading) ? 'visible' : 'collapsed' }}">
    <Border borderRadius="3" borderWidth="1" borderColor="#d0021b">
      <SearchBar text="{{ actions_search }}" hint="Suche" id="search2" tap="inputTap2" android:loaded="doNotShowAndroidKeyboard" />
    </Border>
  </StackLayout>
  
  <lv:RadListView row="2" id="actions_list" items="{{ event_actions_s }}" itemTap="{{ onActionItemTap }}" loadOnDemandMode="Auto" loadMoreDataRequested="{{ onLoadMoreItemsRequestedActions }}">
    <lv:RadListView.listViewLayout>
      <lv:ListViewLinearLayout scrollDirection="Vertical" itemInsertAnimation="Default" itemDeleteAnimation="Default" />
    </lv:RadListView.listViewLayout>
    <lv:RadListView.itemTemplate><!--
        <StackLayout>
          <StackLayout marginTop="20" verticalAlignment="center" height="40" cssClass="card-separate-head">
              <label text="{{ day_name | uppercase() }}" cssClass="theme-color" />
          </StackLayout>
          <Repeater items="{{ list }}">
              <Repeater.itemsLayout>
                <WrapLayout />
              </Repeater.itemsLayout>
              <Repeater.itemTemplate>-->
                  <Card:CardView cssClass="card card-program" elevation="7" radius="3">
                    <GridLayout margin="0" rows="auto, auto" columns="*">
                      <GridLayout margin="0" row="0" rows="*" columns="65, *, 16" padding="10">
                        <StackLayout row="0" col="0" verticalAlignment="top">
                          <label cssClass="time-from" text="{{ action_time_from }}" />
                          <label cssClass="time-to" text="{{ 'bis ' + action_time_to }}" />
                          <StackLayout col="0" height="40" width="65" verticalAlignment="center" tap="{{ setActionAsFavourite }}">
                            <label text="{{ isFavourite ? '&#xf005;' : '&#xf006;' }}" cssClass="fa" color="#ffd700" horizontalAlignment="center" fontSize="24" /><!-- {{ isFavourite ? '&#xf005;' : '&#xf006;' }} -->
                          </StackLayout>
                        </StackLayout>
                        <StackLayout row="0" col="1" verticalAlignment="top">
                          <label cssClass="text" text="{{ action.title }}" textWrap="true" visibility="{{ action.title ? 'visible' : 'collapsed' }}" />
                          <label cssClass="text text-descr" text="{{ action.description | textTruncate(100) }}" textWrap="true" visibility="{{ action.title ? 'collapsed' : 'visible' }}" />
                        </StackLayout>
                        <StackLayout row="0" col="2" verticalAlignment="top">
                          <Repeater items="{{ action_languages }}">
                            <Repeater.itemTemplate>
                              <StackLayout height="12" width="12" marginTop="3" marginBottom="1"> 
                                <image src="{{ '~/images/flags/' + $value + '.png' }}" stretch="aspectFill" cssClass="flag-image" />
                              </StackLayout>
                            </Repeater.itemTemplate>
                          </Repeater>
                        </StackLayout>  
                      </GridLayout>
                      <GridLayout margin="0" row="1" rows="39" columns="50, *" cssClass="card-footer" visibility="{{ (action.location && action.location != '') ? 'visible' : 'collapsed' }}">
                        <StackLayout height="39" row="0" col="0"></StackLayout>
                        <StackLayout height="39" row="0" col="1" cssClass="card-attr" verticalAlignment="center" orientation="horizontal">
                          <label text="&#xf02b;" cssClass="fa" />
                          <label text="{{ action.location }}" />
                        </StackLayout>
                      </GridLayout>
                    </GridLayout>
                  </Card:CardView><!--
              </Repeater.itemTemplate>
          </Repeater>
        </StackLayout>-->
    </lv:RadListView.itemTemplate>
  </lv:RadListView>
    
  <ActivityIndicator busy="{{ isLoading }}" rowSpan="3" />
</GridLayout>
