<GridLayout rows="*" xmlns:Card="nativescript-cardview" loaded="onTabLoaded" unloaded="onTabUnloaded">
    <GridLayout row="0" rows="180, auto" cssClass="empty-list" horizontalAlignment="center" visibility="{{ (events.length == 0 && !isLoading) ? 'visible' : 'collapsed' }}">
        <StackLayout row="0" verticalAlignment="center" horizontalAlignment="center">
            <image src="~/images/empty-man.png" stretch="none" />
        </StackLayout>
        <Label row="1" text="Leider gibt es in dieser Kategorie keine Veranstaltungen" textWrap="true" />
    </GridLayout>
    <ListView items="{{ events }}" row="0" separatorColor="transparent" visibility="{{ (events.length > 0 && !isLoading) ? 'visible' : 'collapsed' }}">
        <ListView.itemTemplate>
            <StackLayout>
                <StackLayout marginTop="20" verticalAlignment="center" height="40" cssClass="card-separate-head" paddingLeft="10">
                    <label text="{{ month_name }}" />
                </StackLayout>
                <Repeater items="{{ list }}">
                    <Repeater.itemsLayout>
                      <WrapLayout />
                    </Repeater.itemsLayout>
                    <Repeater.itemTemplate>
                        <Card:CardView cssClass="card card-wide card-event" elevation="7" radius="1" tap="{{ detailView }}">
                            <GridLayout rows="156, 20, auto, auto, auto" columns="*, *">
                                <image src="{{ event.banner_url || '~/images/placeholder.png' }}" stretch="aspectFill" cssClass="card-image" row="0" colSpan="2" />
                                <StackLayout cssClass="card-attr" row="1" colSpan="2" verticalAlignment="center">
                                    <label text="{{ start + ' - ' + end }}" textWrap="true" />
                                </StackLayout>
                                <StackLayout row="2" colSpan="2" verticalAlignment="center">
                                    <label text="{{ event.name }}" cssClass="h2" textWrap="false" />
                                    <label text="{{ event.description | textTruncate(100) }}" cssClass="card-subhead" textWrap="true" />
                                </StackLayout>
                                <StackLayout row="3" colSpan="2" cssClass="card-hr" visibility="{{ (event.place || event.category) ? 'visible' : 'collapsed' }}" />
                                <StackLayout cssClass="card-attr" height="20" row="4" col="0" verticalAlignment="center" orientation="horizontal" visibility="{{ event.place ? 'visible' : 'collapsed' }}">
                                    <label text="&#xf041;" cssClass="fa" />
                                    <label text="{{ event.place }}" />
                                </StackLayout>
                                <StackLayout cssClass="card-attr" height="20" row="4" col="1" verticalAlignment="center" orientation="horizontal" visibility="{{ event.category ? 'visible' : 'collapsed' }}">
                                    <label text="&#xf02b;" cssClass="fa" />
                                    <label text="{{ event.category }}" />
                                </StackLayout>
                            </GridLayout>
                        </Card:CardView>
                    </Repeater.itemTemplate>
                </Repeater>
            </StackLayout>
        </ListView.itemTemplate>
    </ListView>
    <ActivityIndicator busy="{{ isLoading }}" />
</GridLayout>
